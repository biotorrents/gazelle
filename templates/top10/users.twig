{% extends "base.twig" %}

{% block content %}

	<h2>Top users</h2>

	{# dataUploaded #}
	{% if dataUploaded is not empty %}
	<section>
		<h3>{{ limit }} most data uploaded</h3>

		<table data-sortable>
			<thead>
				<tr>
					<th class="center">Rank</th>
					<th>Username</th>
					<th class="center">Uploaded</th>
					<th class="center">Downloaded</th>
					<th class="center">Ratio</th>
					<th class="center">Upload count</th>
					<th class="center">Join date</th>
				</tr>
			</thead>

			<tbody>
				{% for key, item in dataUploaded %}
					<tr>
						<td class="center">{{ key + 1 }}</td>
						<td class="center">{{ item.id|formatUsername }}</td>
						<td class="center">{{ item.uploaded|get_size }}</td>
						<td class="center">{{ item.downloaded|get_size }}</td>
                        <td class="center">{{ ratio(item.uploaded, item.downloaded) }}</td>
						<td class="center">{{ item.uploadCount|number_format }}</td>
						<td data-value="{{ item.registered }}">
                            <span class="tooltip" title="{{ item.registered|date(env.sqlDate) }}">
                                {{ item.registered|date(env.sqlDate)|relativeTime }}
                            </span>
                        </td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</section>
	{% endif %}

    {# dataDownloaded #}
	{% if dataDownloaded is not empty %}
	<section>
		<h3>{{ limit }} most data downloaded</h3>

		<table data-sortable>
			<thead>
				<tr>
					<th class="center">Rank</th>
					<th>Username</th>
					<th class="center">Uploaded</th>
					<th class="center">Downloaded</th>
					<th class="center">Ratio</th>
					<th class="center">Upload count</th>
					<th class="center">Join date</th>
				</tr>
            </thead>

			<tbody>
				{% for key, item in dataDownloaded %}
					<tr>
						<td class="center">{{ key + 1 }}</td>
						<td class="center">{{ item.id|formatUsername }}</td>
						<td class="center">{{ item.uploaded|get_size }}</td>
						<td class="center">{{ item.downloaded|get_size }}</td>
                        <td class="center">{{ ratio(item.uploaded, item.downloaded) }}</td>
						<td class="center">{{ item.uploadCount|number_format }}</td>
						<td data-value="{{ item.registered }}">
                            <span class="tooltip" title="{{ item.registered|date(env.sqlDate) }}">
                                {{ item.registered|date(env.sqlDate)|relativeTime }}
                            </span>
                        </td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</section>
	{% endif %}

    {# uploadCount #}
	{% if uploadCount is not empty %}
	<section>
		<h3>{{ limit }} most torrents uploaded</h3>

		<table data-sortable>
			<thead>
				<tr>
					<th class="center">Rank</th>
					<th>Username</th>
					<th class="center">Uploaded</th>
					<th class="center">Downloaded</th>
					<th class="center">Ratio</th>
					<th class="center">Upload count</th>
					<th class="center">Join date</th>
				</tr>
            </thead>

			<tbody>
				{% for key, item in uploadCount %}
					<tr>
						<td class="center">{{ key + 1 }}</td>
						<td class="center">{{ item.id|formatUsername }}</td>
						<td class="center">{{ item.uploaded|get_size }}</td>
						<td class="center">{{ item.downloaded|get_size }}</td>
                        <td class="center">{{ ratio(item.uploaded, item.downloaded) }}</td>
						<td class="center">{{ item.uploadCount|number_format }}</td>
						<td data-value="{{ item.registered }}">
                            <span class="tooltip" title="{{ item.registered|date(env.sqlDate) }}">
                                {{ item.registered|date(env.sqlDate)|relativeTime }}
                            </span>
                        </td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</section>
	{% endif %}

{% endblock %}


{% block sidebar %}

	{% include "top10/sidebar.twig" %}

{% endblock %}
